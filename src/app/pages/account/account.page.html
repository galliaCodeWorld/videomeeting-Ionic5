<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button auto-hide="true" color="primary"></ion-menu-button>
    </ion-buttons>
    <ion-title>
        Account Settings
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="padding">
  <form [formGroup]="nameForm">
      <ion-grid>
          <ion-row>
              <ion-col>
                  <h2>Account Info.</h2>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col>
                  <app-pic-preview [imageSource]="image" (onAvatarChanged)="onAvatarChanged($event)"></app-pic-preview>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col>
                  <ion-list>
                      <ion-item>
                          <ion-label position="floating">First Name</ion-label>
                          <ion-input type="text" formControlName="firstName"></ion-input>
                          <ion-icon name="create-outline" slot="end" size="small"> </ion-icon>

                      </ion-item>
                      <ion-item text-wrap *ngIf="!nameForm.controls.firstName.valid && nameForm.controls.firstName.dirty">
                          <app-show-form-errors [control]="nameForm.controls.firstName"></app-show-form-errors>
                      </ion-item>
                      <ion-item>
                          <ion-label position="floating">Last Name</ion-label>
                          <ion-input type="text" formControlName="lastName"></ion-input>
                          <ion-icon name="create-outline" slot="end" size="small"> </ion-icon>
                      </ion-item>
                      <ion-item text-wrap *ngIf="!nameForm.controls.lastName.valid && nameForm.controls.lastName.dirty">
                          <app-show-form-errors [control]="nameForm.controls.lastName"></app-show-form-errors>
                      </ion-item>
                  </ion-list>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col class="text-center">
                  <ion-button (click)="updateNameAndAvatar($event)" [disabled]="!nameForm.valid">Update Name & Avatar</ion-button>
                  <ion-button (click)="resetNameForm($event)" color="light">Cancel</ion-button>
              </ion-col>
          </ion-row>
      </ion-grid>
  </form>





  <form [formGroup]="emailForm">
      <ion-grid>
          <ion-row>
              <ion-col>
                  <h2>Account Email</h2>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col>
                  <ion-list>
                      <ion-item>
                          <ion-label position="stacked">Email</ion-label>
                          <ion-input formControlName="email" [value]="userProfile?.email"></ion-input>
                          <ion-icon name="create-outline" slot="end" size="small"> </ion-icon>
                      </ion-item>
                      <ion-item text-wrap *ngIf="!emailForm.controls.email.valid && emailForm.controls.email.dirty">
                          <app-show-form-errors [control]="emailForm.controls.email"></app-show-form-errors>
                      </ion-item>

                  </ion-list>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col class="text-center">
                  <ion-button (click)="updateEmail($event)" [disabled]="!emailForm.valid">Update Email</ion-button>
                  <ion-button (click)="resetEmailForm($event)" color="light">Cancel</ion-button>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col>
                  <span class="info">
                      To change your account email, enter a new email in place of your current email.
                  </span>
              </ion-col>
          </ion-row>
      </ion-grid>


  </form>

  <form [formGroup]="passwordForm">
      <ion-grid>
          <ion-row>
              <ion-col>
                  <h2>Account Password</h2>
              </ion-col>
          </ion-row>
          <ion-row> 
              <ion-col>
                  <ion-list>
                      <ion-item>
                          <ion-label position="stacked">New Password</ion-label>
                          <ion-input type="password" formControlName="newPassword"></ion-input>
                          <ion-icon name="create-outline" slot="end" size="small"> </ion-icon>
                      </ion-item>
                      <ion-item text-wrap *ngIf="!passwordForm.controls.newPassword.valid && passwordForm.controls.newPassword.dirty">
                          <app-show-form-errors [control]="passwordForm.controls.newPassword"></app-show-form-errors>
                      </ion-item>
                      <ion-item>
                          <ion-label position="stacked">Confirm New Password</ion-label>
                          <ion-input type="password" formControlName="confirmPassword"></ion-input>
                          <ion-icon name="create-outline" slot="end" size="small"> </ion-icon>
                      </ion-item>
                      <ion-item text-wrap *ngIf="!passwordForm.controls.confirmPassword.valid && passwordForm.controls.confirmPassword.dirty">
                          <app-show-form-errors [control]="passwordForm.controls.confirmPassword"></app-show-form-errors>
                      </ion-item>
                  </ion-list>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col class="text-center">
                  <ion-button (click)="updatePassword($event)" [disabled]="!passwordForm.valid">Update Password</ion-button>
                  <ion-button (click)="resetPasswordForm($event)" color="light">Cancel</ion-button>
              </ion-col>
          </ion-row>
          <ion-row>
              <ion-col>
                  <span class="info">To change your password, enter your new password in the "New Password" and the "Confirm New Password" field.</span>
              </ion-col>
          </ion-row>
      </ion-grid>




  </form>

</ion-content>
<!-- <phone-ringer #phoneRinger></phone-ringer> -->
